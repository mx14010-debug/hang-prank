<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>System Error</title>
<style>
body {
    background: black;
    color: red;
    font-family: monospace;
    text-align: center;
    padding-top: 100px;
}
#msg {
    font-size: 25px;
    display: none;
}
#tap {
    font-size: 22px;
    color: white;
}
.flash {
    background: red !important;
}
</style>
</head>
<body>

<h2 id="tap">⚠️ SYSTEM FAILURE — TAP TO SCAN ⚠️</h2>
<div id="msg">SYSTEM ERROR: CRITICAL FAILURE<br>Rebooting Device...</div>

<script>
document.body.addEventListener("click", function() {

    // Hide tap text
    document.getElementById("tap").style.display = "none";
    document.getElementById("msg").style.display = "block";

    // VIBRATION (works only after user gesture)
    if (navigator.vibrate) {
        navigator.vibrate([300,200,300,200,600]);
    }

    // FLASHLIGHT (works only when site is HTTPS — GitHub Pages is HTTPS)
    async function flashLight() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" }});
            const track = stream.getVideoTracks()[0];
            await track.applyConstraints({ advanced: [{ torch: true }] });

            // Turn flash off after 3 seconds
            setTimeout(() => track.applyConstraints({ advanced: [{ torch: false }] }), 3000);

        } catch (e) {
            console.log("Flash not supported: ", e);
        }
    }
    flashLight();

    // SCREEN FLASHING EFFECT
    let x = 0;
    let flashInt = setInterval(() => {
        document.body.classList.toggle("flash");
        x++;
        if (x > 8) clearInterval(flashInt);
    }, 150);

});
</script>

</body>
</html>
